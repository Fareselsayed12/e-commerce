import './polyfills.server.mjs';
import{a as G,b as u,c as M,d as D,e as A,f,g as H,h as Z,i as I,k as $}from"./chunk-K6IBYRSI.mjs";import{a as V}from"./chunk-QLLXKYDU.mjs";import{l as P}from"./chunk-2XO7W6LE.mjs";import"./chunk-TIUWZEKO.mjs";import{$a as F,Db as q,Eb as c,Lb as o,Nb as y,Ob as x,Pb as b,Qb as _,Ra as l,W as E,ca as T,da as L,ea as g,fa as p,fb as d,nb as k,rb as m,ub as e,vb as i,wb as s,zb as N}from"./chunk-YSR4IDTV.mjs";import"./chunk-X2SEQXRR.mjs";function z(t,r){t&1&&(e(0,"li"),o(1,"Name is Required"),i())}function B(t,r){t&1&&(e(0,"li"),o(1,"Name Should be more than or equal 3 chars"),i())}function J(t,r){t&1&&(e(0,"li"),o(1,"Name Should be less than or equal 20 chars"),i())}function K(t,r){if(t&1&&(e(0,"div",6),g(),e(1,"svg",18),s(2,"path",19),i(),p(),e(3,"span",20),o(4,"Danger"),i(),e(5,"div")(6,"ul",21),d(7,z,2,0,"li")(8,B,2,0,"li")(9,J,2,0,"li"),i()()()),t&2){c();let n=_(5);l(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("minlength")?8:n!=null&&n.getError("maxlength")?9:-1)}}function O(t,r){t&1&&(e(0,"li"),o(1,"Email is Required"),i())}function Q(t,r){t&1&&(e(0,"li"),o(1,"Enter Valid Email "),i())}function U(t,r){if(t&1&&(e(0,"div",6),g(),e(1,"svg",18),s(2,"path",19),i(),p(),e(3,"span",20),o(4,"Danger"),i(),e(5,"div")(6,"ul",21),d(7,O,2,0,"li")(8,Q,2,0,"li"),i()()()),t&2){c();let n=_(11);l(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("email")?8:-1)}}function W(t,r){t&1&&(e(0,"li"),o(1,"Password is Required"),i())}function X(t,r){t&1&&(e(0,"li"),o(1,"must be at least 6 chars"),i())}function Y(t,r){if(t&1&&(e(0,"div",6),g(),e(1,"svg",18),s(2,"path",19),i(),p(),e(3,"span",20),o(4,"Danger"),i(),e(5,"div")(6,"ul",21),d(7,W,2,0,"li")(8,X,2,0,"li"),i()()()),t&2){c();let n=_(17);l(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("pattern")?8:-1)}}function ee(t,r){t&1&&(e(0,"div",6),g(),e(1,"svg",18),s(2,"path",19),i(),p(),e(3,"span",20),o(4,"Danger"),i(),e(5,"div")(6,"ul",21)(7,"li"),o(8,"Password confirmation is incorrect"),i()()()())}function te(t,r){t&1&&(e(0,"li"),o(1,"phone is Required"),i())}function ie(t,r){t&1&&(e(0,"li"),o(1,"accept only egypt phone numbers"),i())}function ne(t,r){if(t&1&&(e(0,"div",6),g(),e(1,"svg",18),s(2,"path",19),i(),p(),e(3,"span",20),o(4,"Danger"),i(),e(5,"div")(6,"ul",21),d(7,te,2,0,"li")(8,ie,2,0,"li"),i()()()),t&2){c();let n=_(28);l(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("pattern")?8:-1)}}function re(t,r){t&1&&(e(0,"span"),s(1,"i",22),i())}function oe(t,r){if(t&1&&(e(0,"p",16),o(1),i()),t&2){let n=c();l(),y("*",n.msgError," ")}}function le(t,r){if(t&1&&(e(0,"p",17),o(1),i()),t&2){let n=c();l(),y("",n.success," ")}}var j=class t{authService=E(V);router=E(P);isLoading=!1;msgError="";success="";registerForm=new A({name:new f(null,[u.required,u.minLength(3),u.maxLength(20)]),email:new f(null,[u.required,u.email]),password:new f(null,[u.required,u.pattern(/^[A-Z]\w{7,}$/)]),rePassword:new f(null,[u.required]),phone:new f(null,[u.required,u.pattern(/^01[0125][0-9]{8}$/)])},{validators:[this.confirmPassword]});submitForm(){console.log(this.registerForm),this.registerForm.valid?(this.isLoading=!0,this.authService.sendRegisterForm(this.registerForm.value).subscribe({next:r=>{console.log(r),r.message==="success"&&(setTimeout(()=>{this.router.navigate(["/login"])},500),this.success=r.message),this.isLoading=!1},error:r=>{this.msgError=r.error.message,this.isLoading=!1}})):this.registerForm.markAllAsTouched()}confirmPassword(r){let n=r.get("password")?.value,a=r.get("rePassword")?.value;return n===a?null:{mismatch:!0}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=F({type:t,selectors:[["app-register"]],decls:38,vars:14,consts:[[1,"w-1/2","mx-auto"],[1,"text-3xl","font-light","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","name","type","text","id","name",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","id","password",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","rePassword","type","password","id","rePassword",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"main-btn","block","ms-auto",3,"disabled"],[1,"bg-red-400","text-white"],[1,"bg-green-400","text-white","px-2","py-4","mt-2","capitalize"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"]],template:function(n,a){if(n&1){let h=N();e(0,"section",0)(1,"h1",1),o(2,"Register Now :"),i(),e(3,"form",2),q("ngSubmit",function(){return T(h),L(a.submitForm())}),e(4,"div",3),x(5),e(6,"label",4),o(7,"name:"),i(),s(8,"input",5),d(9,K,10,1,"div",6),i(),e(10,"div",3),x(11),e(12,"label",7),o(13,"email:"),i(),s(14,"input",8),d(15,U,9,1,"div",6),i(),e(16,"div",3),x(17),e(18,"label",9),o(19,"password:"),i(),s(20,"input",10),d(21,Y,9,1,"div",6),i(),e(22,"div",3)(23,"label",11),o(24,"rePassword:"),i(),s(25,"input",12),d(26,ee,9,0,"div",6),i(),e(27,"div",3),x(28),e(29,"label",13),o(30,"phone:"),i(),s(31,"input",14),d(32,ne,9,1,"div",6),i(),e(33,"button",15),o(34,"Signup "),d(35,re,2,0,"span"),i(),d(36,oe,2,1,"p",16)(37,le,2,1,"p",17),i()()}if(n&2){let h,S;l(3),k("formGroup",a.registerForm),l(2);let R=b(a.registerForm.get("name"));l(4),m(R!=null&&R.errors&&((h=a.registerForm.get("name"))!=null&&h.touched)?9:-1),l(2);let C=b(a.registerForm.get("email"));l(4),m(C!=null&&C.errors&&(C!=null&&C.touched)?15:-1),l(2);let v=b(a.registerForm.get("password"));l(4),m(v!=null&&v.errors&&(v!=null&&v.touched)?21:-1),l(5),m(a.registerForm.getError("mismatch")&&((S=a.registerForm.get("rePassword"))!=null&&S.touched)?26:-1),l(2);let w=b(a.registerForm.get("phone"));l(4),m(w!=null&&w.errors&&(w!=null&&w.touched)?32:-1),l(),k("disabled",a.isLoading),l(2),m(a.isLoading?35:-1),l(),m(a.msgError?36:-1),l(),m(a.success?37:-1)}},dependencies:[$,H,G,M,D,Z,I],encapsulation:2})};export{j as RegisterComponent};
