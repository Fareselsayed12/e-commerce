import './polyfills.server.mjs';
import{a as h}from"./chunk-XTV2U237.mjs";import{l as I}from"./chunk-GV5M4JH7.mjs";import{a as P}from"./chunk-P4OPTWQU.mjs";import{m as b}from"./chunk-2XO7W6LE.mjs";import"./chunk-TIUWZEKO.mjs";import{$a as v,Db as _,Eb as S,Lb as a,Nb as c,Oa as g,Ra as n,Sb as y,W as s,ca as m,da as u,nb as d,sb as f,tb as x,ub as i,vb as o,wb as l,zb as C}from"./chunk-YSR4IDTV.mjs";import"./chunk-X2SEQXRR.mjs";var k=r=>["/details",r],E=(r,e)=>e.id;function M(r,e){if(r&1){let t=C();i(0,"div",1)(1,"div",2)(2,"div",3),l(3,"img",4),o(),i(4,"div",5)(5,"h4",6),a(6),o(),i(7,"h3",7),a(8),o(),i(9,"div",8)(10,"span"),a(11),o(),i(12,"div",9),l(13,"i",10),i(14,"span",11),a(15),o()()()()(),i(16,"button",12),_("click",function(){let O=m(t).$implicit,T=S();return u(T.addToCart(O.id))}),a(17,"Add To Cart"),o()()}if(r&2){let t=e.$implicit;n(),d("routerLink",y(6,k,t._id)),n(2),d("src",t.imageCover,g),n(3),c(" ",t.category.name," "),n(2),c(" ",t.title.split(" ",2).join(" ")," "),n(3),c(" ",t.price," EGP"),n(4),c(" ",t.ratingsAverage," ")}}var w=class r{productsService=s(h);cartService=s(P);toastrService=s(I);products=[];ngOnInit(){this.getProductsData()}getProductsData(){this.productsService.getAllProducts().subscribe({next:e=>{this.products=e.data,console.log(this.products)},error:e=>{console.log(e)}})}addToCart(e){this.cartService.addProductToCart(e).subscribe({next:t=>{console.log(t),t.status==="success"&&(this.cartService.cartNumber.next(t.numOfCartItems),console.log(t.numOfCartItems),this.toastrService.success(t.message,"Success"))},error:t=>{console.log(t)}})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=v({type:r,selectors:[["app-products"]],decls:3,vars:0,consts:[[1,"grid","gap-4","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4"],[1,"card","rounded-md","shadow-sm","overflow-hidden"],[1,"cursor-pointer",3,"routerLink"],[1,"card-img"],["alt","",1,"w-full","h-64","object-contain",3,"src"],[1,"card-body","px-2","py-2","capitalize"],[1,"text-green-500","text-xs"],[1,"font-medium"],[1,"flex","justify-between"],[1,"rating","flex","items-center"],[1,"fas","fa-star","text-yellow-300"],[1,"text-gray-500"],[1,"bg-green-600","text-white","py-2","px-4","rounded","block","w-[80%]","mx-auto",3,"click"]],template:function(t,p){t&1&&(i(0,"div",0),f(1,M,18,8,"div",1,E),o()),t&2&&(n(),x(p.products))},dependencies:[b],styles:[".card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:translateY(100%);opacity:0;transition:all .5s}.card[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}"]})};export{w as ProductsComponent};
