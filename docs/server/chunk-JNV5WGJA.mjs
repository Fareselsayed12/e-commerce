import './polyfills.server.mjs';
import{a as V,b as g,c as D,d as G,e as M,f as S,g as q,h as A,i as H,k as I}from"./chunk-K6IBYRSI.mjs";import{a as N}from"./chunk-QLLXKYDU.mjs";import{l as T}from"./chunk-2XO7W6LE.mjs";import"./chunk-TIUWZEKO.mjs";import{$a as y,Db as F,Eb as u,Lb as a,Nb as _,Ob as v,Pb as h,Qb as w,Ra as r,W as f,ca as E,da as L,ea as x,fa as b,fb as s,nb as C,rb as m,ub as t,vb as i,wb as c,zb as k}from"./chunk-YSR4IDTV.mjs";import"./chunk-X2SEQXRR.mjs";function Z(e,o){e&1&&(t(0,"li"),a(1,"Email is Required"),i())}function P(e,o){e&1&&(t(0,"li"),a(1,"Enter Valid Email "),i())}function j(e,o){if(e&1&&(t(0,"div",6),x(),t(1,"svg",12),c(2,"path",13),i(),b(),t(3,"span",14),a(4,"Danger"),i(),t(5,"div")(6,"ul",15),s(7,Z,2,0,"li")(8,P,2,0,"li"),i()()()),e&2){u();let n=w(5);r(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("email")?8:-1)}}function z(e,o){e&1&&(t(0,"li"),a(1,"Password is Required"),i())}function B(e,o){e&1&&(t(0,"li"),a(1,"must be at least 6 chars"),i())}function U(e,o){if(e&1&&(t(0,"div",6),x(),t(1,"svg",12),c(2,"path",13),i(),b(),t(3,"span",14),a(4,"Danger"),i(),t(5,"div")(6,"ul",15),s(7,z,2,0,"li")(8,B,2,0,"li"),i()()()),e&2){u();let n=w(11);r(7),m(n!=null&&n.getError("required")?7:n!=null&&n.getError("pattern")?8:-1)}}function $(e,o){e&1&&(t(0,"span"),c(1,"i",16),i())}function J(e,o){if(e&1&&(t(0,"p",10),a(1),i()),e&2){let n=u();r(),_("*",n.msgError," ")}}function K(e,o){if(e&1&&(t(0,"p",11),a(1),i()),e&2){let n=u();r(),_("",n.success," ")}}var R=class e{authService=f(N);router=f(T);isLoading=!1;msgError="";success="";loginForm=new M({email:new S(null,[g.required,g.email]),password:new S(null,[g.required,g.pattern(/^[A-Z]\w{7,}$/)])});submitForm(){console.log(this.loginForm),this.loginForm.valid&&(this.isLoading=!0,this.authService.sendLoginForm(this.loginForm.value).subscribe({next:o=>{console.log(o),o.message==="success"&&(setTimeout(()=>{localStorage.setItem("token",o.token),this.authService.getUserData(),this.router.navigate(["/home"])},500),this.success=o.message),this.isLoading=!1},error:o=>{this.msgError=o.error.message,this.isLoading=!1}}))}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=y({type:e,selectors:[["app-login"]],decls:21,vars:9,consts:[[1,"w-1/2","mx-auto"],[1,"text-3xl","font-light","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","id","password",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"main-btn","block","ms-auto",3,"disabled"],[1,"bg-red-400","text-white"],[1,"bg-green-400","text-white","px-2","py-4","mt-2","capitalize"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"]],template:function(n,l){if(n&1){let d=k();t(0,"section",0)(1,"h1",1),a(2,"Login Now :"),i(),t(3,"form",2),F("ngSubmit",function(){return E(d),L(l.submitForm())}),t(4,"div",3),v(5),t(6,"label",4),a(7,"email:"),i(),c(8,"input",5),s(9,j,9,1,"div",6),i(),t(10,"div",3),v(11),t(12,"label",7),a(13,"password:"),i(),c(14,"input",8),s(15,U,9,1,"div",6),i(),t(16,"button",9),a(17,"Login "),s(18,$,2,0,"span"),i(),s(19,J,2,1,"p",10)(20,K,2,1,"p",11),i()()}if(n&2){r(3),C("formGroup",l.loginForm),r(2);let d=h(l.loginForm.get("email"));r(4),m(d!=null&&d.errors&&(d!=null&&d.touched)?9:-1),r(2);let p=h(l.loginForm.get("password"));r(4),m(p!=null&&p.errors&&(p!=null&&p.touched)?15:-1),r(),C("disabled",l.isLoading),r(2),m(l.isLoading?18:-1),r(),m(l.msgError?19:-1),r(),m(l.success?20:-1)}},dependencies:[I,q,V,D,G,A,H],encapsulation:2})};export{R as LoginComponent};
