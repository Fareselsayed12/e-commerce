import './polyfills.server.mjs';
import{a as T}from"./chunk-P4OPTWQU.mjs";import{m as w}from"./chunk-2XO7W6LE.mjs";import{p as E}from"./chunk-TIUWZEKO.mjs";import{$a as h,Db as m,Eb as C,Lb as a,Mb as I,Nb as _,Oa as b,Ra as l,Sb as D,W as v,Wb as x,Yb as f,ca as d,da as u,nb as g,sb as S,tb as k,ub as r,vb as n,wb as p,zb as y}from"./chunk-YSR4IDTV.mjs";import"./chunk-X2SEQXRR.mjs";var V=o=>["/checkout",o],F=(o,e)=>e.product.id;function $(o,e){if(o&1){let t=y();r(0,"div",3)(1,"div",6),p(2,"img",7),n(),r(3,"div",8)(4,"div",9)(5,"h3"),a(6),n(),r(7,"h4",2),a(8),x(9,"currency"),n(),r(10,"button",10),m("click",function(){let c=d(t).$implicit,s=C();return u(s.removeCartItem(c.product.id))}),p(11,"i",11),a(12," Remove"),n()(),r(13,"div",12)(14,"span",13),m("click",function(){let c=d(t).$implicit,s=C();return u(s.updateQuantity(c.product.id,c.count+1))}),p(15,"i",14),n(),r(16,"span"),a(17),n(),r(18,"span",15),m("click",function(){let c=d(t).$implicit,s=C();return u(s.updateQuantity(c.product.id,c.count-1))}),p(19,"i",16),n()()()()}if(o&2){let t=e.$implicit;l(2),g("src",t.product.imageCover,b)("alt",t.product.title),l(4),_(" ",t.product.title," "),l(2),_("Price: ",f(9,5,t.price,"GBP")," "),l(9),I(t.count)}}var P=class o{cartService=v(T);cartData={};ngOnInit(){this.getCartData()}getCartData(){this.cartService.getLoggedUserCart().subscribe({next:e=>{this.cartData=e.data,console.log(this.cartData)},error:e=>{console.log(e)}})}removeCartItem(e){this.cartService.removeSpecificCartItem(e).subscribe({next:t=>{console.log(t),this.cartData=t.data,this.cartService.cartNumber.next(t.numOfCartItems)},error:t=>{console.log(t)}})}updateQuantity(e,t){this.cartService.updateCartItemQuantity(e,t).subscribe({next:i=>{console.log(i),this.cartData=i.data},error:i=>{console.log(i)}})}clearCart(){this.cartService.clearCart().subscribe({next:e=>{console.log(e),e.message==="success"&&(this.getCartData(),this.cartService.cartNumber.next(0))},error:e=>{console.log(e)}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-cart"]],decls:12,vars:7,consts:[[1,"bg-gray-50","p-4"],[1,"text-3xl"],[1,"text-green-500"],[1,"grid","md:grid-cols-[10%_minmax(0,1fr)]","gap-5","mt-3","border-b"],[1,"main-btn","mt-4",3,"routerLink"],[1,"bg-red-500","text-white","py-2","px-4","rounded","ms-3",3,"click"],[1,"left"],[3,"src","alt"],[1,"right","flex","justify-between","items-center"],[1,"start"],[3,"click"],[1,"fas","fa-trash-can","text-green-500"],[1,"end","flex","items-center","gap-2"],[1,"me-2","cursor-pointer",3,"click"],[1,"fa-solid","fa-plus","text-green-500"],[1,"ms-2","cursor-pointer",3,"click"],[1,"fa-solid","fa-minus","text-green-500"]],template:function(t,i){t&1&&(r(0,"section",0)(1,"h1",1),a(2,"Shop Cart:"),n(),r(3,"span",2),a(4),x(5,"currency"),n(),S(6,$,20,8,"div",3,F),r(8,"button",4),a(9,"Checkout"),n(),r(10,"button",5),m("click",function(){return i.clearCart()}),a(11,"Clear Cart"),n()()),t&2&&(l(4),_("Total Cart Price: ",f(5,2,i.cartData.totalCartPrice,"GBP"),""),l(2),k(i.cartData.products),l(2),g("routerLink",D(5,V,i.cartData._id)))},dependencies:[E,w],encapsulation:2})};export{P as CartComponent};
